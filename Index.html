<!DOCTYPE html>
<html>
<head>
<title>Personal Finance Manager</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(135deg,#2f4f88,#4e73df);
}

/* CENTER BOX */
.center-box{
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.box{
    background:white;
    padding:50px;
    width:400px;
    text-align:center;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.3);
    position:relative;
}

button{
    padding:10px;
    margin-top:10px;
    width:100%;
    border:none;
    border-radius:6px;
    cursor:pointer;
    color:white;
    background:#2f6fdd;
    font-size:15px;
}

button:hover{
    background:#1e4fa8;
}

input{
    width:100%;
    padding:8px;
    margin:8px 0;
    border-radius:5px;
    border:1px solid #ccc;
}

/* BACK ICON */
.back-icon{
    position:absolute;
    top:15px;
    left:15px;
    font-size:20px;
    cursor:pointer;
}

/* DASHBOARD */
.dashboard{
    display:none;
    padding:20px;
    background:#f2f2f2;
    min-height:100vh;
}

.card{
    background:white;
    padding:20px;
    margin-bottom:20px;
    border-radius:10px;
}

.green h2{color:green;}
.red h2{color:red;}
.blue h2{color:blue;}

table{
    width:100%;
    border-collapse:collapse;
}

th,td{
    padding:8px;
    border-bottom:1px solid #ddd;
}

th{
    background:#222;
    color:white;
}

#pieChart{
    height:300px !important;
}
.link{
    color:#2f6fdd;
    cursor:pointer;
    font-size:14px;
}
</style>
</head>

<body>

<!-- HOME -->
<div id="homePage" class="center-box">
    <div class="box">
        <h1>Personal Finance Manager üí∞</h1>
        <p>Manage your money smartly</p>
        <button onclick="goDashboard()">Click Here</button>
        <button onclick="goLogin()">Login</button>
    </div>
</div>

<!-- LOGIN -->
<div id="loginPage" class="center-box" style="display:none;">
    <div class="box">
        <span class="back-icon" onclick="goHome()">‚Üê</span>
        <h2>Login</h2>
        <input type="text" placeholder="Username" id="loginUsername">
        <input type="password" placeholder="Password" id="loginPassword">
        <button onclick="loginUser()">Login</button>
        <p class="link" onclick="goRegister()">Go to Register</p>
    </div>
</div>

<!-- REGISTER -->
<div id="registerPage" class="center-box" style="display:none;">
    <div class="box">
        <span class="back-icon" onclick="goLogin()">‚Üê</span>
        <h2>Register</h2>
        <input type="text" placeholder="Username" id="registerUsername">
        <input type="password" placeholder="Password" id="registerPassword">
        <input type="password" placeholder="Confirm Password" id="registerConfirm">
        <button onclick="registerUser()">Register</button>
    </div>
</div>

<!-- DASHBOARD -->
<div id="dashboardPage" class="dashboard">

    <span class="back-icon" onclick="goHome()" style="position:relative;">‚Üê Back</span>

    <div class="card green">
        <h3>Total Income</h3>
        <h2>‚Çπ <span id="totalIncome">0</span></h2>
    </div>

    <div class="card red">
        <h3>Total Expense</h3>
        <h2>‚Çπ <span id="totalExpense">0</span></h2>
    </div>

    <div class="card blue">
        <h3>Balance</h3>
        <h2>‚Çπ <span id="balance">0</span></h2>
    </div>

    <div class="card">
        <h3>Set Income</h3>
        <input type="number" id="incomeInput" placeholder="Enter Income">
        <button onclick="setIncome()">Set Income</button>
    </div>

    <div class="card">
        <h3>Add Expense</h3>
        <input type="number" id="expenseAmount" placeholder="Amount">
        <input type="text" id="expenseCategory" placeholder="Category">
        <button onclick="addExpense()">Add Expense</button>
    </div>

    <div class="card">
        <h3>Expense List</h3>
        <table>
            <thead>
                <tr>
                    <th>Amount</th>
                    <th>Category</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody id="expenseTable"></tbody>
        </table>

        <canvas id="pieChart"></canvas>
    </div>

</div>

<script>
let totalIncome=0;
let totalExpense=0;
let categoryData={};
let chart;

/* NAVIGATION */
function hideAll(){
    document.getElementById("homePage").style.display="none";
    document.getElementById("loginPage").style.display="none";
    document.getElementById("registerPage").style.display="none";
    document.getElementById("dashboardPage").style.display="none";
}

function goHome(){ hideAll(); document.getElementById("homePage").style.display="flex"; }
function goLogin(){ hideAll(); document.getElementById("loginPage").style.display="flex"; }
function goRegister(){ hideAll(); document.getElementById("registerPage").style.display="flex"; }

function goDashboard(){
    hideAll();
    document.getElementById("dashboardPage").style.display="block";
    if(!chart){ createChart(); }
}

/* REGISTER */
function registerUser() {
    let username = document.getElementById("registerUsername").value.trim();
    let password = document.getElementById("registerPassword").value.trim();
    let confirmPassword = document.getElementById("registerConfirm").value.trim();

    if(username === "" || password === "" || confirmPassword === "") {
        alert("Please fill all fields");
        return;
    }

    if(password !== confirmPassword) {
        alert("Passwords do not match");
        return;
    }

    alert("Registered successfully! Please login.");

    // Clear fields after registration
    document.getElementById("registerUsername").value = "";
    document.getElementById("registerPassword").value = "";
    document.getElementById("registerConfirm").value = "";

    goLogin(); // Go to login page
}

/* LOGIN */
function loginUser() {
    let username = document.getElementById("loginUsername").value.trim();
    let password = document.getElementById("loginPassword").value.trim();

    if(username === "" || password === "") {
        alert("Please enter username and password");
        return;
    }

    alert("Login successful!");
    goDashboard();
}

/* INCOME */
function setIncome(){
    let income=parseInt(document.getElementById("incomeInput").value);
    if(!isNaN(income)){
        totalIncome=income;
        document.getElementById("totalIncome").innerText=income;
        updateBalance();
    }
}

/* EXPENSE */
function addExpense(){
    let amount=parseFloat(document.getElementById("expenseAmount").value);
    let category=document.getElementById("expenseCategory").value.trim();

    if(!amount||category===""){ alert("Enter amount and category"); return; }

    totalExpense+=amount;

    if(categoryData[category]) categoryData[category]+=amount;
    else categoryData[category]=amount;

    let today=new Date().toISOString().split('T')[0];

    document.getElementById("expenseTable").innerHTML+=
    `<tr><td>‚Çπ ${amount}</td><td>${category}</td><td>${today}</td></tr>`;

    document.getElementById("totalExpense").innerText=totalExpense;
    updateBalance();
    updateChart();

    document.getElementById("expenseAmount").value="";
    document.getElementById("expenseCategory").value="";
}

function updateBalance(){
    document.getElementById("balance").innerText=totalIncome-totalExpense;
}

/* PIE CHART */
function createChart(){
    let ctx=document.getElementById("pieChart").getContext("2d");
    chart=new Chart(ctx,{
        type:"pie",
        data:{ labels:[], datasets:[{ data:[], backgroundColor:["#ff6384","#36a2eb","#ffce56","#4bc0c0","#9966ff","#ff9f40"] }]},
        options:{ responsive:true, maintainAspectRatio:false }
    });
}

function updateChart(){
    chart.data.labels=Object.keys(categoryData);
    chart.data.datasets[0].data=Object.values(categoryData);
    chart.update();
}
</script>

</body>
</html>
